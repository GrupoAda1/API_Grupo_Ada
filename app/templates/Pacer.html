{% extends 'base.html' %}

{% block title %}Pacer{% endblock %}

{% block body %}
<div class="conteudo">
    <form action="" onsubmit="return submitForm(event)" class="mt-5">
        <div id="formulario_pacer" class="gap-5">
            <div class="row">
                <div class="input-group">
                    <span class="input-group-text">Product Owner</span>
                    <input type="text" class="form-control" id="name_Po" placeholder="Nome do Product Owner" aria-label="Po" aria-describedby="name_Po" required>
                    <button type="button" class="btn btn_dropdown p-0" onclick="showPacer(event, 'po_pacer')"><i class="input-group-text dropdown-icon mdi mdi-menu-down" id="dropdown-icon-po_pacer"></i></button>
                </div>
                  {{ po_pacer | safe }}
            </div>
    
            <div class="row">
                <div class="input-group">
                    <span class="input-group-text">Scrum Master</span>
                    <input type="text" class="form-control" id="name_Sm" placeholder="Nome do Scrum Master" aria-label="Sm" aria-describedby="name_Sm" required>
                    <button type="button" class="btn btn_dropdown p-0" onclick="showPacer(event, 'sm_pacer')"><i class="input-group-text dropdown-icon mdi mdi-menu-down" id="dropdown-icon-sm_pacer"></i></button>
                </div>
                {{ sm_pacer | safe }}
            </div>
    
          <div class="row">
                <div class="input-group" id="name_Dev1">
                  <span class="input-group-text">Dev 1</span>
                  <input type="text" class="form-control" id="name_Dev" placeholder="Nome do Desenvolvedor(a)" aria-label="Dev" aria-describedby="name_Dev" required>
                  <button type="button" class="btn btn_dropdown p-0" onclick="showPacer(event, `dev{{devTeamCont}}_pacer`)"><i class="input-group-text dropdown-icon mdi mdi-menu-down" id="dropdown-icon-dev_pacer"></i></button>
                  <button type="button" class="btn p-0" onclick="adicionarDev()"><i class="input-group-text dropdown-icon mdi mdi-plus"></i></button>
                </div>
    
                {{ dev_pacer | safe }}
          </div>
        </div>
      
      <button type="submit" data-bs-toggle="modal" data-bs-target="#exampleModal">Prosseguir</button>
    </form>

    <div class="modal fade" id="exampleModal" tabindex="-1" aria-labelledby="exampleModalLabel" aria-hidden="true" style="display: none;">
        <div class="modal-dialog">
          <div class="modal-content">
            <div class="modal-header">
              <h1 class="modal-title fs-5" id="exampleModalLabel">Notas Finais da Equipe:</h1>
              <button type="button" class="btn-close" data-bs-dismiss="modal" aria-label="Close"></button>
            </div>
            <div class="modal-body" id="modal-body"></div>
            <div class="modal-footer">
              <button type="button" class="btn btn-secondary" data-bs-dismiss="modal">Baixar PDF</button>
            </div>
          </div>
        </div>
      </div>
</div>
<script type="text/javascript" src="{{ url_for('static', filename='scripts/pacer.js') }}"></script>
<script>function adicionarDev() {
  devTeamCont++;

  const novaRow = document.createElement('div');
  novaRow.classList.add('row');
  novaRow.id = `devPacer${devTeamCont}`;

  const novoDev = document.createElement('div');
  novoDev.classList.add('input-group');
  novoDev.id = `dev-${devTeamCont}`
  novoDev.innerHTML = `
      <span class="input-group-text">Dev ${devTeamCont}</span>
      <input type="text" class="form-control" id="name_Dev${devTeamCont}" placeholder="Nome do Desenvolvedor(a)" aria-label="Dev" aria-describedby="name_Dev" required>
      <button type="button" class="btn p-0" onclick="showPacer(event, 'dev${devTeamCont}_pacer')"><i class="input-group-text dropdown-icon mdi mdi-menu-down" id="dropdown-icon-dev${devTeamCont}_pacer"></i></button>
      <button type="button" class="btn p-0" onclick="adicionarDev()"><i class="input-group-text dropdown-icon mdi mdi-plus"></i></button>
      <button class="btn p-0" onclick="removerDev('devPacer${devTeamCont}')"><i class="input-group-text dropdown-icon mdi mdi-trash-can"></i></button>`;

  const novoPacerDev = document.createElement('div');
  novoPacerDev.id = `dev${devTeamCont}_pacer`
  novoPacerDev.style.display = 'block';
  novoPacerDev.innerHTML = `
          <table class="table table-bordered">
              <thead>
                  <tr>
                  <th scope="col">Requisito</th>
                  <th scope="col">Péssimo</th>
                  <th scope="col">Ruim</th>
                  <th scope="col">Bom</th>
                  <th scope="col">Excelente</th>
                  </tr>
              </thead>
              <tbody>
                  <tr>
                  <th scope="row">Proatividade</th>
                  {% for i in range(4) %}
                  <td>
                      <div class="form-check form-check-inline">
                          <input class="form-check-input" type="radio" name="inlineRadioProatividadeDev${devTeamCont}" id="inlineRadioProatividade{{i}}" value="{{notas[i]}}" checked>
                          <label class="form-check-label" for="inlineRadioProatividade{{i}}">{{i}}</label>
                      </div>
                  </td>
                  {% endfor %}
                  </tr>
                  <tr>
                  <th scope="row">Autonomia</th>
                  {% for i in range(4) %}
                  <td>
                      <div class="form-check form-check-inline">
                          <input class="form-check-input" type="radio" name="inlineRadioAutonomiaDev${devTeamCont}" id="inlineRadioAutonomia{{i}}" value="{{notas[i]}}" checked>
                          <label class="form-check-label" for="inlineRadioAutonomia{{i}}">{{i}}</label>
                      </div>
                  </td>
                  {% endfor %}
                  </tr>
                  <tr>
                  <th scope="row">Colaboração</th>
                  {% for i in range(4) %}
                  <td>
                      <div class="form-check form-check-inline">
                          <input class="form-check-input" type="radio" name="inlineRadioColaboracaoDev${devTeamCont}" id="inlineRadioColaboracao{{i}}" value="{{notas[i]}}" checked>
                          <label class="form-check-label" for="inlineRadioColaboracao{{i}}">{{i}}</label>
                      </div>
                  </td>
                  {% endfor %}
                  </tr>
                  <tr>
                  <th scope="row">Entrega</th>
                  {% for i in range(4) %}
                  <td>
                      <div class="form-check form-check-inline">
                          <input class="form-check-input" type="radio" name="inlineRadioEntregaDev${devTeamCont}" id="inlineRadioEntrega{{i}}" value="{{notas[i]}}" checked>
                          <label class="form-check-label" for="inlineRadioEntrega{{i}}">{{i}}</label>
                      </div>
                  </td>
                  {% endfor %}
                  </tr>
              </tbody>
              </table>`;

  novaRow.appendChild(novoDev);
  novaRow.appendChild(novoPacerDev);
              
  document.getElementById('formulario_pacer').appendChild(novaRow);
};</script>
{% endblock %}